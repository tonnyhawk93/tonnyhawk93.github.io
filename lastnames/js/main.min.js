    let game = document.querySelector('.game'),
        point = 0,
        totalPoint = 0,
        totalAntipoint = 0,
        wraper = document.querySelector('.game__wraper'),
        endRound = new Event ('endRound'),
        endGame = new Event ('endGame'),
        i = document.getElementById('i'),
        x = document.getElementById('x'),
        book = document.getElementById('book'),
        modal = document.getElementById('modal'),
        modalText = document.getElementById('modal__text'),
        gameArea = document.getElementById('gameArea'),
        answerTo = document.getElementById('answerTo'),
        answerFrom = document.getElementById('answerFrom'),
        to_right = '',
        from_right = '';
        to_initials = '';
        from_initials = '';
        resize();
        modalText.innerHTML = `Игра: ЗАЛИЗНЯКУ ОТ РОЗЕНТАЛЯ<br>
            <p>Задача: Надпишите почтовый конверт, указав в правильной форме имя получателя и имя отправителя. Помните, что фамилию получателя следует употребить в дательном падеже (кому?), а фамилию отправителя — в родительном (от кого?). Перейти к следующему уровню игры (новому конверту и новым получателю и отправителю) вы сможете только тогда, когда корректно напишете обе фамилии.</p>`
        x.onclick = ()=> {
        modal.classList.toggle('game__modal_hiden');
        gameArea.classList.toggle('game__area_hiden');
        wraper.classList.toggle('game__wraper_active');
        }
        i.onclick = ()=> {
            modal.classList.toggle('game__modal_hiden');
            gameArea.classList.toggle('game__area_hiden');
            wraper.classList.toggle('game__wraper_active');
            modalText.innerHTML = '';
            modalText.innerHTML = `Надпишите почтовый конверт, указав в правильной форме имя получателя и имя отправителя. Помните, что фамилию получателя следует употребить в дательном падеже (кому?), а фамилию отправителя — в родительном (от кого?). Перейти к следующему уровню игры (новому конверту и новым получателю и отправителю) вы сможете только тогда, когда корректно напишете обе фамилии.<br>
            <p>Выставление балла происходит следующим образом: <br>
            — за каждый уровень игры игрок получает 10 баллов; <br>
            — каждая ошибка игрока отнимает от 10 итоговых баллов один балл штрафа;<br>
            — после 10 неудачных попыток игрок может получить за прохождение игры только 1 балл.<br></p>
            `
        }
        book.onclick = ()=> {
            modal.classList.toggle('game__modal_hiden');
            wraper.classList.toggle('game__wraper_active');
            modalText.innerHTML = '';
            modalText.innerHTML = `Надпишите почтовый конверт, указав в правильной форме имя получателя и имя отправителя. Помните, что фамилию получателя следует употребить в дательном падеже (кому?), а фамилию отправителя — в родительном (от кого?). Перейти к следующему уровню игры (новому конверту и новым получателю и отправителю) вы сможете только тогда, когда корректно напишете обе фамилии.
            <p>Текущее количество баллов: ${totalPoint}.<br>
               Текущее количество ошибок: ${totalAntipoint}.
            </p>`
            gameArea.classList.toggle('game__area_hiden')
        }

       function resize(){
            let vw = document.documentElement.clientWidth;
            let vh = document.documentElement.clientHeight;
            let h = vh
            let w = (h/100*178);
            if(w >= vw) {
                w = vw
                h =vw/100*56
            }
            game.style.width = w +'px';
            game.style.height = h +'px';
            fontResize(modalText, 1.6);
            fontResize(to, 4);
            fontResize(from, 4);
            fontResize(answerTo, 4);
            fontResize(answerFrom, 4);
            }
       window.onresize = resize;

       function fontResize(item, index) {
        item.style.fontSize='';
        w = parseInt(game.style.width),
        h = parseInt(game.style.height);
        fontSize = ((Math.sqrt(w*h))/100)*index;
        item.style.fontSize = `${fontSize}px`;
        item.style.lineHeight = `${fontSize*1.1}px`;
        }

    function end () {
        modal.classList.remove('game__modal_hiden');
        gameArea.classList.add('game__area_hiden');
        wraper.classList.toggle('game__wraper_active');
        modalText.innerHTML = "";
        modalText.innerHTML = `К сожалению, общение с В. И. Далем закончилось. Вы допустили 5 ошибок. Не расстраивайтесь! В следующий раз обязательно получится.`
            x.onclick = () => {
               location.reload()
            }
    };
    function showNames() {
        $('#to').html('');
        $('#from').html('');
        $.ajax({
            type: 'POST',
            url: 'ajax.php',
            data: {
                event: 'get_last_names',
            },
            cache: false,
            success: function(response) {
                $('#to').html(response.to_initials + response.to);
                $('#from').html(response.from_initials + response.from);
                to_initials= response.to_initials;
                to_right = response.to_right;
                from_initials = response.from_initials;
                from_right = response.from_right;
                point = 10;
            }
        });
    };

    showNames();

$(document).ready(function(){
    $('.button').on('click', function(event) {

        if ($('#answerTo').val() == '' || $('#answerFrom').val() == '') {
            return false;
        }

        console.log($('#answerTo').val().toLowerCase(), to_right);

        if (($('#answerTo').val().toLowerCase() == to_right || $('#answerTo').val().toLowerCase() == to_initials.toLowerCase() + to_right) && ($('#answerFrom').val().toLowerCase() == from_right || $('#answerFrom').val().toLowerCase() == from_initials.toLowerCase() + from_right)) {
            if (totalAntipoint < 10) {
              totalPoint = totalPoint + point;
            } else {
              totalPoint++;
            }
            $('#answerTo').val('');
            $('#answerFrom').val('');
            showNames();
        } else {
            if (point > 1) {
              point--;
            }
            totalAntipoint++;
        }

        /*if (totalAntipoint < 5) {

        } else {
            end();
        }*/
    });
})





